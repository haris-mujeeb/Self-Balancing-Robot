<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Self-Balancing-Robot: KalmanFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Self-Balancing-Robot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_kalman_filter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_kalman_filter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">KalmanFilter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class that implements the Kalman filter for sensor fusion.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="include_2kalman__filter_8hpp_source.html">kalman_filter.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af88364716f3319b46f23c758e8c03cc6" id="r_af88364716f3319b46f23c758e8c03cc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af88364716f3319b46f23c758e8c03cc6">KalmanFilter</a> (float dt, float Q_angle, float Q_gyro, float R_angle, float C_0)</td></tr>
<tr class="memdesc:af88364716f3319b46f23c758e8c03cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor to initialize the Kalman filter with specific parameters.  <br /></td></tr>
<tr class="separator:af88364716f3319b46f23c758e8c03cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7af6b610a2f652a12f3372e5f0eced" id="r_aae7af6b610a2f652a12f3372e5f0eced"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae7af6b610a2f652a12f3372e5f0eced">getAngle</a> (float measured_angle, float measured_gyro)</td></tr>
<tr class="memdesc:aae7af6b610a2f652a12f3372e5f0eced"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Kalman filter with new sensor measurements and returns the estimated angle.  <br /></td></tr>
<tr class="separator:aae7af6b610a2f652a12f3372e5f0eced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14ee7a23cbe90ef72f371f38188496f6" id="r_a14ee7a23cbe90ef72f371f38188496f6"><td class="memItemLeft" align="right" valign="top"><a id="a14ee7a23cbe90ef72f371f38188496f6" name="a14ee7a23cbe90ef72f371f38188496f6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Yiorderfilter</b> (float angle_m, float gyro_m, float dt, float K1)</td></tr>
<tr class="separator:a14ee7a23cbe90ef72f371f38188496f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa235c7aa04ec8a56d53c1574e768ddeb" id="r_aa235c7aa04ec8a56d53c1574e768ddeb"><td class="memItemLeft" align="right" valign="top"><a id="aa235c7aa04ec8a56d53c1574e768ddeb" name="aa235c7aa04ec8a56d53c1574e768ddeb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Kalman_Filter</b> (double angle_m, double gyro_m, float dt, float Q_angle, float Q_gyro, float R_angle, float C_0)</td></tr>
<tr class="separator:aa235c7aa04ec8a56d53c1574e768ddeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34fa5ecd48a9c9147214074aa4463d2d" id="r_a34fa5ecd48a9c9147214074aa4463d2d"><td class="memItemLeft" align="right" valign="top"><a id="a34fa5ecd48a9c9147214074aa4463d2d" name="a34fa5ecd48a9c9147214074aa4463d2d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Angle</b> (int16_t ax, int16_t ay, int16_t az, int16_t gx, int16_t gy, int16_t gz, float dt, float Q_angle, float Q_gyro, float R_angle, float C_0, float K1)</td></tr>
<tr class="separator:a34fa5ecd48a9c9147214074aa4463d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14ee7a23cbe90ef72f371f38188496f6" id="r_a14ee7a23cbe90ef72f371f38188496f6"><td class="memItemLeft" align="right" valign="top"><a id="a14ee7a23cbe90ef72f371f38188496f6" name="a14ee7a23cbe90ef72f371f38188496f6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Yiorderfilter</b> (float angle_m, float gyro_m, float dt, float K1)</td></tr>
<tr class="separator:a14ee7a23cbe90ef72f371f38188496f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa235c7aa04ec8a56d53c1574e768ddeb" id="r_aa235c7aa04ec8a56d53c1574e768ddeb"><td class="memItemLeft" align="right" valign="top"><a id="aa235c7aa04ec8a56d53c1574e768ddeb" name="aa235c7aa04ec8a56d53c1574e768ddeb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Kalman_Filter</b> (double angle_m, double gyro_m, float dt, float Q_angle, float Q_gyro, float R_angle, float C_0)</td></tr>
<tr class="separator:aa235c7aa04ec8a56d53c1574e768ddeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a247a8de3ebd7211864c01238ca950c94" id="r_a247a8de3ebd7211864c01238ca950c94"><td class="memItemLeft" align="right" valign="top"><a id="a247a8de3ebd7211864c01238ca950c94" name="a247a8de3ebd7211864c01238ca950c94"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Angletest</b> (int16_t ax, int16_t ay, int16_t az, int16_t gx, int16_t gy, int16_t gz, float dt, float Q_angle, float Q_gyro, float R_angle, float C_0, float K1)</td></tr>
<tr class="separator:a247a8de3ebd7211864c01238ca950c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88364716f3319b46f23c758e8c03cc6" id="r_af88364716f3319b46f23c758e8c03cc6"><td class="memItemLeft" align="right" valign="top"><a id="af88364716f3319b46f23c758e8c03cc6" name="af88364716f3319b46f23c758e8c03cc6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>KalmanFilter</b> (float dt, float Q_angle, float Q_gyro, float R_angle, float C_0)</td></tr>
<tr class="separator:af88364716f3319b46f23c758e8c03cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a259f211b22e66985ea8ce7294b588123" id="r_a259f211b22e66985ea8ce7294b588123"><td class="memItemLeft" align="right" valign="top"><a id="a259f211b22e66985ea8ce7294b588123" name="a259f211b22e66985ea8ce7294b588123"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>getAngle</b> (double measured_angle, double measured_gyro)</td></tr>
<tr class="separator:a259f211b22e66985ea8ce7294b588123"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab2e32d30feacab30979a8a357207532e" id="r_ab2e32d30feacab30979a8a357207532e"><td class="memItemLeft" align="right" valign="top"><a id="ab2e32d30feacab30979a8a357207532e" name="ab2e32d30feacab30979a8a357207532e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>angle</b></td></tr>
<tr class="memdesc:ab2e32d30feacab30979a8a357207532e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimated angle of the system (e.g., robot tilt) <br /></td></tr>
<tr class="separator:ab2e32d30feacab30979a8a357207532e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e14b7eeb7ad08415b6bd1738576389d" id="r_a5e14b7eeb7ad08415b6bd1738576389d"><td class="memItemLeft" align="right" valign="top"><a id="a5e14b7eeb7ad08415b6bd1738576389d" name="a5e14b7eeb7ad08415b6bd1738576389d"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>Gyro_x</b></td></tr>
<tr class="separator:a5e14b7eeb7ad08415b6bd1738576389d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe30d60e4854043801cc63eb83961e7" id="r_abbe30d60e4854043801cc63eb83961e7"><td class="memItemLeft" align="right" valign="top"><a id="abbe30d60e4854043801cc63eb83961e7" name="abbe30d60e4854043801cc63eb83961e7"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>Gyro_y</b></td></tr>
<tr class="separator:abbe30d60e4854043801cc63eb83961e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e53b228b4ca527cd5badf5bfa7b51e" id="r_ad0e53b228b4ca527cd5badf5bfa7b51e"><td class="memItemLeft" align="right" valign="top"><a id="ad0e53b228b4ca527cd5badf5bfa7b51e" name="ad0e53b228b4ca527cd5badf5bfa7b51e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>Gyro_z</b></td></tr>
<tr class="separator:ad0e53b228b4ca527cd5badf5bfa7b51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecae66f96dde0fc25b983d0635c7d1f6" id="r_aecae66f96dde0fc25b983d0635c7d1f6"><td class="memItemLeft" align="right" valign="top"><a id="aecae66f96dde0fc25b983d0635c7d1f6" name="aecae66f96dde0fc25b983d0635c7d1f6"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>accelz</b> = 0</td></tr>
<tr class="separator:aecae66f96dde0fc25b983d0635c7d1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3556bdf5cccd081967e9efc920168951" id="r_a3556bdf5cccd081967e9efc920168951"><td class="memItemLeft" align="right" valign="top"><a id="a3556bdf5cccd081967e9efc920168951" name="a3556bdf5cccd081967e9efc920168951"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>angle6</b></td></tr>
<tr class="separator:a3556bdf5cccd081967e9efc920168951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871c00eb806edecb4f40838ba21f8ac2" id="r_a871c00eb806edecb4f40838ba21f8ac2"><td class="memItemLeft" align="right" valign="top"><a id="a871c00eb806edecb4f40838ba21f8ac2" name="a871c00eb806edecb4f40838ba21f8ac2"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>angle</b></td></tr>
<tr class="separator:a871c00eb806edecb4f40838ba21f8ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class that implements the Kalman filter for sensor fusion. </p>
<p>The Kalman filter is used to estimate the true state of the system (e.g., angle, angular velocity) based on noisy sensor measurements. It fuses the accelerometer and gyroscope readings to provide more accurate and stable estimates for applications like robot balance control. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af88364716f3319b46f23c758e8c03cc6" name="af88364716f3319b46f23c758e8c03cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88364716f3319b46f23c758e8c03cc6">&#9670;&#160;</a></span>KalmanFilter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KalmanFilter::KalmanFilter </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>dt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>Q_angle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>Q_gyro</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>R_angle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>C_0</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor to initialize the Kalman filter with specific parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The time step (seconds) for the filter update. </td></tr>
    <tr><td class="paramname">Q_angle</td><td>The process noise covariance for the angle. </td></tr>
    <tr><td class="paramname">Q_gyro</td><td>The process noise covariance for the gyroscope. </td></tr>
    <tr><td class="paramname">R_angle</td><td>The measurement noise covariance for the angle. </td></tr>
    <tr><td class="paramname">C_0</td><td>The constant used in the complementary filter. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aae7af6b610a2f652a12f3372e5f0eced" name="aae7af6b610a2f652a12f3372e5f0eced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7af6b610a2f652a12f3372e5f0eced">&#9670;&#160;</a></span>getAngle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float KalmanFilter::getAngle </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>measured_angle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>measured_gyro</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the Kalman filter with new sensor measurements and returns the estimated angle. </p>
<p>This method performs both the time update (prediction) and the measurement update (correction) based on the sensor readings (measured angle and measured gyro).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measured_angle</td><td>The measured angle from the accelerometer. </td></tr>
    <tr><td class="paramname">measured_gyro</td><td>The measured angular velocity from the gyroscope. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The filtered angle estimate. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="include_2kalman__filter_8hpp_source.html">kalman_filter.hpp</a></li>
<li>reference material/Tumbller_Code_20240301/Tumbller/<a class="el" href="_tumbller___code__20240301_2_tumbller_2_kalman_filter_8h_source.html">KalmanFilter.h</a></li>
<li>reference material/TumbllerV1.1 Function Introduction/Copy Me First/KalmanFilter/<a class="el" href="_tumbller_v1_81_01_function_01_introduction_2_copy_01_me_01_first_2_kalman_filter_2_kalman_filter_8h_source.html">KalmanFilter.h</a></li>
<li>test/plotPID/<a class="el" href="test_2plot_p_i_d_2kalman__filter_8hpp_source.html">kalman_filter.hpp</a></li>
<li>reference material/Tumbller_Code_20240301/Tumbller/<b>KalmanFilter.cpp</b></li>
<li>reference material/TumbllerV1.1 Function Introduction/Copy Me First/KalmanFilter/<b>KalmanFilter.cpp</b></li>
<li>test/plotPID/<b>kalman_filter.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_kalman_filter.html">KalmanFilter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
